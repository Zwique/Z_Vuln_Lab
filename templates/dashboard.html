<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Backup Management System â€“ Dashboard</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #0f1117;
      color: #c9d1d9;
    }
    nav {
      background: #161b22;
      border-bottom: 1px solid #30363d;
      padding: 0 32px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      height: 56px;
    }
    .nav-brand {
      font-size: 15px;
      font-weight: 600;
      color: #e6edf3;
    }
    .nav-brand span { color: #58a6ff; }
    .nav-user {
      font-size: 13px;
      color: #8b949e;
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .badge {
      background: #1f3a57;
      color: #58a6ff;
      padding: 2px 8px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
    }
    .badge.guest { background: #2a2a1f; color: #d29922; }
    a.logout {
      color: #f85149;
      text-decoration: none;
      font-size: 13px;
    }
    .container { max-width: 960px; margin: 40px auto; padding: 0 24px; }
    h2 { font-size: 22px; color: #e6edf3; margin-bottom: 8px; }
    .subtitle { font-size: 13px; color: #8b949e; margin-bottom: 32px; }
    .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
    .panel {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 28px;
    }
    .panel h3 {
      font-size: 15px;
      font-weight: 600;
      color: #e6edf3;
      margin-bottom: 8px;
    }
    .panel p {
      font-size: 13px;
      color: #8b949e;
      margin-bottom: 20px;
      line-height: 1.6;
    }
    .btn {
      display: inline-block;
      padding: 9px 18px;
      border-radius: 6px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      text-decoration: none;
      border: none;
    }
    .btn-primary { background: #238636; color: #fff; }
    .btn-primary:hover { background: #2ea043; }
    .btn-secondary { background: #21262d; color: #c9d1d9; border: 1px solid #30363d; }
    .btn-secondary:hover { background: #30363d; }
    .flash {
      background: #1a3a1f;
      border: 1px solid #2ea043;
      color: #56d364;
      border-radius: 6px;
      padding: 12px 16px;
      font-size: 13px;
      margin-bottom: 24px;
    }
    input[type=file] {
      display: block;
      font-size: 13px;
      color: #8b949e;
      margin-bottom: 16px;
      width: 100%;
    }
    .info-row {
      display: flex;
      gap: 8px;
      align-items: center;
      font-size: 13px;
      color: #8b949e;
      margin-bottom: 10px;
    }
    .info-row strong { color: #e6edf3; }
    .divider { border: none; border-top: 1px solid #21262d; margin: 20px 0; }
  </style>
</head>
<body>
  <nav>
    <div class="nav-brand">&#128274; Backup <span>Management</span></div>
    <div class="nav-user">
      <span>{{ username }}</span>
      <span class="badge {% if role != 'admin' %}guest{% endif %}">{{ role }}</span>
      <a href="/logout" class="logout">Sign out</a>
    </div>
  </nav>

  <div class="container">
    <h2>Session Management</h2>
    <p class="subtitle">Export or restore operator sessions for backup and disaster recovery purposes.</p>

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for m in messages %}
        <div class="flash">&#10003; {{ m }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="grid">
      <div class="panel">
        <h3>&#8681; Export Session</h3>
        <p>Download a serialized snapshot of your current session. The backup file can be used to restore your working state on another node.</p>
        <div class="info-row"><strong>User:</strong> {{ username }}</div>
        <div class="info-row"><strong>Role:</strong> {{ role }}</div>
        <hr class="divider">
        <a href="/export" class="btn btn-primary">Download Session Backup</a>
      </div>

      <div class="panel">
        <h3>&#8679; Import Session</h3>
        <p>Restore a previously exported session backup. Upload the <code>.bak</code> file generated by this system to resume a saved state.</p>
        <form method="POST" action="/import" enctype="multipart/form-data">
          <input type="file" name="session_file" accept=".bak">
          <button type="submit" class="btn btn-secondary">Restore Session</button>
        </form>
      </div>
    </div>
  </div>
</body>
</html>
